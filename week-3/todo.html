<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <div id="parentDiv">
        <input type="text">
        <button onclick="addTodo()">Add todo</button>
    </div>
        <script>
            let counter = 1;
            function addTodo() {
                const inputEl = document.querySelector("input");
                const value = inputEl.value;

                if (value == ""){
                    alert("enter a valid todo")
                    return;
                }

                const parentEl = document.getElementById("parentDiv")

                const newDiv = document.createElement("div");
                newDiv.setAttribute("id", "todo-" + counter)

                const head = document.createElement("h4");
                head.textContent = `${counter} . ${value}`

                const button = document.createElement("button");
                button.textContent = "Delete"
                button.setAttribute("onclick", "deleteTodo(" + counter + ")");

                newDiv.appendChild(head)
                newDiv.appendChild(button)

                parentEl.append(newDiv);

                counter++;

                inputEl.value = "";
                
            }

            function deleteTodo(index){
                const delEl = document.getElementById("todo-" + index);
                if (delEl) {
                    delEl.parentNode.removeChild(delEl)
                }

                const remainingTodos = document.querySelectorAll("id", "todo-");
    
    // Reset counter if no todos are left
                if (remainingTodos.length === 0) {
                counter = 1;
             }
            }
        </script>
    </div>
</body>
</html>